<!--
                 ,ae,
                ,88888e
 _____   ,a888b.9888888i   _____              _
(_____)  888888888888888  (____ \            | |
   _     88888888888888Y   _   \ \ ____  ____| |  _ ____   ____  ___  ___
  | |    '8888888888888'  | |   | / _  |/ ___) | / )  _ \ / _  )/___)/___)
 _| |_     "S888888888"   | |__/ ( ( | | |   | |< (| | | ( (/ /|___ |___ |
(_____)      "7888888Y    |_____/ \_||_|_|   |_| \_)_| |_|\____|___/(___/
                "e88j
                  "Y

-->
<!DOCTYPE html>
<html lang="en">
<head>
<!-- Links -->
<link rel="canonical" href="https://sandyuraz.com/blogs/using_mutt" type=""/>
<link rel="shortcut icon" href="https://sandyuraz.com/assets/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="https://sandyuraz.com/assets/apple-touch-icon.png" type="image/png"/>
<link rel="image_src" href="https://sandyuraz.com/assets/android-chrome-512x512.png" type="image/png"/>
<link rel="icon" href="https://sandyuraz.com/assets/favicon.ico" type=""/>
<!-- Meta -->
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" property="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" property="generator" content="Darkness">
<meta name="author" property="author" content="sandy">
<meta name="date" property="date" content="0; 12000 H.E.">
<meta name="theme-color" property="theme-color" content="#fffff4">
<meta name="description" property="description" content="May 13th, 2019...">
<meta name="og:title" property="og:title" content="Bring joy back to email with Mutt üêï">
<meta name="og:site_name" property="og:site_name" content="Sandy‚Äôs Website ‚õ©Ô∏è">
<meta name="og:url" property="og:url" content="https://sandyuraz.com/blogs/using_mutt">
<meta name="og:locale" property="og:locale" content="en_GB">
<meta name="og:type" property="og:type" content="website">
<meta name="og:image" property="og:image" content="https://sandyuraz.com/blogs/using_mutt/preview.jpg">
<meta name="og:image:alt" property="og:image:alt" content="Preview">
<meta name="og:image:type" property="og:image:type" content="image/jpg">
<meta name="og:image:width" property="og:image:width" content="1280">
<meta name="og:image:height" property="og:image:height" content="640">
<meta name="og:description" property="og:description" content="May 13th, 2019...">
<meta name="twitter:card" property="twitter:card" content="summary_large_image">
<meta name="twitter:site" property="twitter:site" content="Sandy‚Äôs Website ‚õ©Ô∏è">
<meta name="twitter:creator" property="twitter:creator" content="@sandyuraz">
<meta name="twitter:image:src" property="twitter:image:src" content="https://sandyuraz.com/blogs/using_mutt/preview.jpg">
<meta name="twitter:url" property="twitter:url" content="https://sandyuraz.com/blogs/using_mutt">
<meta name="twitter:title" property="twitter:title" content="Bring joy back to email with Mutt üêï">
<meta name="twitter:description" property="twitter:description" content="May 13th, 2019...">
<!-- Scripts -->
<script type="module">document.documentElement.classList.remove("no-js");document.documentElement.classList.add("js");</script>
<script async src="https://sandyuraz.com/scripts/time.js"></script>
<script src="https://sandyuraz.com/scripts/highlight/highlight.min.js"></script>
<script src="https://sandyuraz.com/scripts/highlight/languages/bash.min.js"></script>
<script src="https://sandyuraz.com/scripts/highlight/languages/plaintext.min.js"></script>
<script>hljs.highlightAll();</script>
<!-- Extra -->

<!-- Title -->
<title>Bring joy back to email with Mutt üêï</title>
</head>
<!-- Styling -->
<link rel="stylesheet" type="text/css" href="https://sandyuraz.com/css/darkness.css">
<link rel="stylesheet" href="https://sandyuraz.com/scripts/highlight/styles/sandy.min.css">
<body class="article">
<!-- Header -->

<div class="header">
<h1 class="section-1"><img id="myface" src="https://sandyuraz.com/najimi.webp" width="112" alt="Top Face" height="112">Bring joy back to email with Mutt üêï</h1>
<div class="menu">
<span id="author" class="author">sandy</span><br>
<span id="email" class="email">[at] sandyuraz [dot] com</span><br>
<span id="revdate">
<a href="https://sandyuraz.com/dossier">Dossier üñã</a> | <a href="https://sandyuraz.com/books">Bookshelf üîñ</a> | <a href="https://sandyuraz.com/fortunes">Fortunes üßß</a> | <a href="https://sandyuraz.com/">Home üè†</a></span>
</div>
<div id="hetime" class="menu"></div>
</div>
<!-- Content -->
<div class="writing">

<div class="paragraph">
<p>
May 13th, 2019
</p>
</div>
<h1 id="abstract" class="section-2">Abstract</h1>
<div class="paragraph">
<p>
&#34;Electronic mail (email or e-mail) is a method of exchanging messages (&#34;mail&#34;) between people using electronic devices. Invented by Ray Tomlinson, email first entered limited use in the 1960s and by the mid-1970s had taken the form now recognized as email.&#34; 
<sup class="footnote"><a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">I</a></sup>
Email has been around for more than 50 years now. As we go further on our timeline, folks from new generations are starting to forget the beauty of email. This article will discuss the problems with the current state of emails and the ways to bring back joy into it.
</p>
</div>
<h1 id="problems-with-modern-email" class="section-2">Problems with modern email</h1>
<div class="paragraph">
<p>
When you ask someone to check their email, I am sure they would rather use their phone if they do not have one open already on their computer. The reason for this is the discomfort people have opening their email services in their browsers. The key for this discomfort is time. When I open my email on my laptop, it takes about 5-6 seconds to just open my browser, 2-3 more seconds to enter the email address, and God knows how much longer until my inbox actually opens. Looking at you, Gmail.
</p>
</div>
<div class="paragraph">
<p>
People want their services to work fast and without any delays. Phones have apps that open and become operational with just a tap of a finger. However, phone apps are not very extensive in their functionality (attaching files, sorting mail, flagging email, bulk delete) and they do not offer a full range of formatting tools. By all means, they never had to, they are just expected to perform the most basic options.
</p>
</div>
<div class="paragraph">
<p>
Due to all the convenience that mobile apps offer, people choose to use it all the time instead of full clients, therefore limiting the number of actions they can make. They just reserve themselves to most basic functionality. Which is very and very unfortunate. Instead of progressing and learning new tools and better ways to perform tasks, users prefer to stick to what they know. This is not only an email problem, it is a general issue with most if not all technologies.
</p>
</div>
<div class="paragraph">
<p>
In reality, email is a fantastic way of communication. Indeed, it was the <em>only</em> way to communicate over the Internet back in 1970s and 1980s. As the time progresses and we create our future, developers around the world tried to work on email clients and unfortunately made them more unintuitive and less user-friendly. This beautiful way of communication became this big hassle of navigating to intermediate apps and typing a message.
</p>
</div>
<div class="paragraph">
<p>
Is there a solution for this unfortunate turn of events and overcomplication of email technology? I wish to introduce you to <code>Mutt</code> email client that brings back joy and happiness into emailing each other.
</p>
</div>
<h1 id="what-is-mutt" class="section-2">What is Mutt?</h1>
<div class="paragraph">
<p>
<a href="http://www.mutt.org/" title="">Mutt</a> is a text-based email client developed by Michael Elkins in 1995 for UNIX-like systems. I want to say that this is truly the way emails were meant to be used. Before I start getting angry emails, I am aware of other fantastic <code>TUI</code> and <code>ncurses</code> email clients, such as: <a href="http://www.gnus.org/" title="">Gnus</a>, <a href="http://www.instinct.org/elm/" title="">Elm</a>, and <a href="http://alpine.x10host.com/alpine/" title="">Alpine</a> (Used by Brian Kernighan!). However, it is safe to say that <code>Mutt</code> is the most extensive, feature-rich, actively developed, and well-supported by its community. Just to list some of its features, please take a look at the excerpt from Mutt‚Äôs website below:
</p>
</div>
<div class="ulist">
<ul>

<li>
<p>
color support
</p>
</li>

<li>
<p>
active development community
</p>
</li>

<li>
<p>
full control of message headers when composing
</p>
</li>

<li>
<p>
highly customizable, including keybindings and macros
</p>
</li>

<li>
<p>
postpone message composition indefinetly for later recall
</p>
</li>

<li>
<p>
easily include attachments when composing, even from the command line
</p>
</li>

<li>
<p>
easy to install (uses GNU autoconf)
</p>
</li>

<li>
<p>
translation into at least 20 languages
</p>
</li>

<li>
<p>
small and efficient
</p>
</li>

<li>
<p>
<em>It‚Äôs free!</em> (no cost and GPL&#39;ed)
</p>
</li>

<li>
<p>
and so <a href="http://www.mutt.org/" title="">much more!</a>
</p>
</li>
</ul>
</div>

<div class="paragraph">
<p>
<code>Mutt</code> accompanied with <code>offlineimap</code> will allow you to have all your emails saved on your machine so you will have a 24/7 access to them even if you do not have internet connection. You can write an email and postpone it indefinitely until your internet connection comes back. It also takes 0.1 seconds to boot it up and start composing a message. Do not forget about the aesthetics and romance with the terminal. Let us talk about the actual setup and what you have to do to be happy with your email experience.
</p>
</div>
<h1 id="imap-and-smtp-protocols" class="section-2">IMAP and SMTP protocols</h1>
<div class="paragraph">
<p>
As you might know, email service in itself is relaying on several layers of protocols to retrieve and send mail. There is also POP3 protocol similar to IMAP. I will not discuss the differences between them, but I can assure you that IMAP is always a better choice as it is more organized in its nature. Internet Message Access Protocol or IMAP is used to retrieve all email messages from a mail server over a TCP/IP connection. This is the protocol we will use to download all our messages and store them locally. Simple Mail Transfer Protocol or SMTP is used for sending messages and handling remote mail server message transferring.
</p>
</div>
<div class="paragraph">
<p>
You can imagine that <code>Mutt</code> email client will rely on both of the protocols to operate normally. And you will be right. <code>offlineimap</code> is a program that allows us to use IMAP protocol and store all messages directly on our machine. There is also an option where you could use <code>Mutt</code> without <code>offlineimap</code>, it would mean that everytime you want to open your mailbox, Mutt will contact your mail server to download list of your messages. This is a very time expensive operation as it greatly depends on your bandwidth, internet location, and physical location from the mail server. Also, it would not allow you to access your messages without a constant internet connection. For this article, I will include full <code>offlineimap</code> configuration before we start using <code>Mutt</code>.
</p>
</div>
<h1 id="offlineimap" class="section-2">offlineimap</h1>
<h2 id="installation" class="section-3">Installation</h2>
<div class="paragraph">
<p>
If you are using one of the bigger Linux distributions (Ubuntu, Fedora, Debian, and etc), it should already be installed. Try runnig <code>% offlineimap</code> to see if you have an active executable.
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">NOTE</div>
</td>
<td class="content">
<code>%</code> indicates that we are in the terminal. Everything after <code>%</code> should be executed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
If you do not have it installed, you can run <code>% sudo pacman -S offlineimap</code> on Arch Linux to install it or use python package manager <a href="https://pypi.org/project/pip/" title="">pip</a> to install it.
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-bash" data-lang="sh">% pip install --user offlineimap</code></pre>
</div>

<div class="paragraph">
<p>
That should get you a fresh copy of <code>offlineimap</code>.
</p>
</div>
<h2 id="configuration" class="section-3">Configuration</h2>
<div class="paragraph">
<p>
<code>offlineimap</code> as a UNIX application, uses a configuration file, conveniently called <code>.offlineimaprc</code>. To make things easier, touch the file in your home directory or open your favorite tex editor, <em>emacs</em>, and write down the following:
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-plaintext" data-lang="">~/.offlineimaprc
----------------
[general]
metadata = ~/.offlineimap
# You can change mymail to something else
accounts = mymail
socktimeout = 60

[Account mymail]
localrepository = local-mymail
remoterepository = remote-mymail

[Repository local-mymail]
type = Maildir
localfolders = ~/.mail/mymail

[Repository remote-mymail]
type = IMAP
remotehost = imap.site.com # edit this
remoteuser = myusername # edit this
remotepass = mypassword # edit this
ssl = yes
realdelete = no
sslcacertfile = /etc/ssl/certs/ca-certificates.crt</code></pre>
</div>

<div class="paragraph">
<p>
This config file just gives us some details about how to contact the IMAP server and how to save it. <code>_mymail_</code> is any name of your choice. For my university mail, I have it named <code>kumail</code>, feel free to name it whatever name is convenient for you.
</p>
</div>
<div class="paragraph">
<p>
Local Repository gives info where it store all our email data, that would be <code>.mail/_mymail_</code> directory in your home directory. Remote repository is a bit more trickier but not difficult. It just specifies what you mail server is. Find your IMAP server, ports are not really important because they are usually the default ones (993). For example, my university has its IMAP server on imap.ku.edu. Username and password should be pretty obvious.
</p>
</div>
<h2 id="syncing-your-mailbox" class="section-3">Syncing your mailbox</h2>
<div class="paragraph">
<p>
Just run the command below to synchronize your email server and your local mailbox.
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-bash" data-lang="sh">% offlineimap</code></pre>
</div>

<div class="paragraph">
<p>
It will take a while to run this command for the first time because it has to download <em>everything</em>. Depending on your mailbox size, it may take a non-trivial time. Just be patient and let it do the magic for you. It is also a good advice for life. Just live the best you can, it will play itself out in the best way possible. Also, a little bit of faith always helps.
</p>
</div>
<div class="paragraph">
<p>
With this, we should be ready to comfortably start configuring our new email client.
</p>
</div>
<h1 id="mutt-and-neomutt" class="section-2">Mutt and NeoMutt</h1>
<div class="paragraph">
<p>
So far, we talked about <code>Mutt</code>, but there is also a fork of it (same software with more features), called <code>NeoMutt</code>. We will be using it instead of <code>Mutt</code> as it is more extensible, faster, and backward-compatible with <code>Mutt</code>. You have same configuration files for both of them.
</p>
</div>
<h2 id="installation" class="section-3">Installation</h2>
<div class="paragraph">
<p>
Installation of <code>NeoMutt</code> is super straight forward. Just pick your favorite flavor of Linux and install a package called <code>neomutt</code>. For Arch Linux, it just would be
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-bash" data-lang="sh">% sudo pacman -S neomutt</code></pre>
</div>

<div class="paragraph">
<p>
Consult with the <a href="https://neomutt.org/distro.html" title="">official downloads page</a> for a list of the biggest distributions and how to install package on them.
</p>
</div>
<h2 id="configuration" class="section-3">Configuration</h2>
<div class="paragraph">
<p>
For the sake of brevity, I will brake down the configuration into multiple chunks. Firstly, I will talk about basic installation just to get a barebone version working, securing your password, and best of them all, making it super colorful, with signatures, ANSI escape sequences, and other cool stuff.
</p>
</div>
<h3 id="basic-config" class="section-4">Basic config</h3>
<div class="paragraph">
<p>
Just to get you started, the drill is the same as the last time, but now it would be called <code>~/.muttrc</code> The config file has a lot of different entries, so to keep it short, I will include the config file and it will be an exercise for the reader to get the meaning of the entries (this will be simple, I promise).
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-plaintext" data-lang=""># This should go to ~/.muttrc
# Set up all the folders
set folder=&#34;~/.mail/mymail&#34;
mailboxes = +INBOX
mailboxes = +&#39;Sent Items&#39;
mailboxes = +&#39;Deleted Items&#39;
set spoolfile = +INBOX
set trash = +&#39;Deleted Items&#39;
set postponed = +&#39;Drafts&#39;
set record = +&#39;Sent Items&#39;

# Sort by reverse date
set sleep_time = 0
set sort = &#39;reverse-date&#39;

# Default sending charset
set send_charset=&#34;utf-8&#34;

# SMTP FOR SENDING EMAIL
set realname=&#34;Big Lebowski&#34; # edit this
set my_user=myusername # edit this
set my_pass=mypassword # edit this
set from = myaddress@example.com # edit this
set smtp_url=smtp://$my_user:$my_pass@authsmtp.site.com:587 # edit this

# Sending mail options
set edit_headers=yes
set use_from = yes
set fast_reply=yes
set include=no

# SSL options
set ssl_force_tls = yes
set ssl_starttls = yes

# Default text editor
set editor = $EDITOR

# Ways to open the mail messages
auto_view text/html
alternative_order text/plain text/html

# Headers
my_hdr X-Info: Keep It Simple, Stupid.
my_hdr X-Operating-System: `uname -s`, kernel `uname -r`
my_hdr User-Agent: Every email client sucks, this one just sucks less.

set markers = no
set mark_old = no

set forward_format = &#34;Fwd: %s&#34;       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set forward_quote                    # include message in forwards
set reverse_name                     # reply as whomever it was to
#set include                          # include message in replies

auto_view text/html
auto_view application/pgp-encrypted
alternative_order text/plain text/enriched text/html
set rfc2047_parameters = yes

# Date and index formatting styles
set date_format=&#34;%m-%d-%y %T&#34;
set index_format=&#34;%2C | %Z [%d] %-30.30F (%-4.4c) %s&#34;# -*-muttrc-*-</code></pre>
</div>

<div class="paragraph">
<p>
You can easily leave everything as it is, just edit all the lines with <code># edit this</code>. Please pay a close attention to the line <code>set smtp_url...</code>. You have to find your SMTP server address and port number (usually 587). After that, your email should be operational!
</p>
</div>
<h2 id="make-it-cool" class="section-3">Make it cool</h2>
<h3 id="secure-password" class="section-4">Secure password</h3>
<div class="paragraph">
<p>
You might not like that we store your password in plain text in your <code>~/.muttrc</code>. I do not like it either. In this section, we will encrypt your email password and only you should be able te unlock it. We will encrypt your password with GPG. To do so, you have to have a pair of keys: public and private. To read more about public and private key encryption, visit its <a href="https://en.wikipedia.org/wiki/Public-key_cryptography" title="">Wikipedia page.</a>
</p>
</div>
<div class="paragraph">
<p>
We will make you a pair of your own encryption keys to store your password in a very very secure way.
</p>
</div>
<h4 id="generating-pair-of-keys" class="section-5">Generating pair of keys</h4>
<div class="paragraph">
<p>
The following command will get you through everything
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-bash" data-lang="sh">% gpg --gen-key</code></pre>
</div>

<div class="paragraph">
<p>
Make a new directory in your home directory with <code>% mkdir ~/.mutt</code>
</p>
</div>
<h4 id="creating-password-file" class="section-5">Creating password file</h4>
<div class="paragraph">
<p>
You have to create your password with <code>% echo set my_pass = &#39;_mypassword_&#39; &gt; ~/.mutt/mypass</code>
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">IMPORTANT</div>
</td>
<td class="content">
Put a space before the command so your system will not save your plain text password in its shell history.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
Encrypt the file with <code>% gpg -r <u>my_email</u> -e ~/.mutt/mypass</code>, where <code><u>my_email</u></code> is the email address you used when you created your key. You will have a new file called <code>mypass.gpg</code> that is your actual encrypted password.
</p>
</div>
<div class="paragraph">
<p>
You can decrypt it and get the contents with <code>% gpg -d ~/.mutt/mypass.gpg</code>
</p>
</div>
<div class="paragraph">
<p>
Remove the old file with <code>% rm mypass</code>
</p>
</div>
<h4 id="add-key-to-mutt" class="section-5">Add key to Mutt</h4>
<div class="paragraph">
<p>
Add the following line to the top of your <code>~/.muttrc</code>: <code>source &#34;gpg -dq $HOME/.mutt/mypass.gpg |&#34;</code>
</p>
</div>
<div class="paragraph">
<p>
Now, you can get rid of the plain text password from your <code>~/.muttrc</code> and you are done! Try opening NeoMutt, it should ask you for your gpg password if you set up one.
</p>
</div>
<h3 id="add-your-signature" class="section-4">Add your signature</h3>
<div class="paragraph">
<p>
Make your signature in the <code>~/.mutt/mysig.sig</code>, for example
</p>
</div>
<div class="listingblock">
<pre class="highlight"><code class="language-plaintext" data-lang="">~/.mutt/mysig.sig
-----------------
Jack Bauer

Director of C.T.U.
Don&#39;t call me</code></pre>
</div>

<div class="paragraph">
<p>
Add the line below to include your signature in every new email message. <code>set signature = &#34;$HOME/.mutt/mysig.sig&#34;</code>
</p>
</div>
<h3 id="encrypting-your-emails" class="section-4">Encrypting your emails</h3>
<div class="paragraph">
<p>
If you are feeling dangerous, you can start signing your emails, encrypting them, armored signatures, and other cool stuff. To do that, download link:./gpg.rc[this file], add that to your <code>~/.mutt/</code> directory, create one if you don‚Äôt have it, and add the following line to your <code>~/.muttrc</code>: <code>source ~/.mutt/gpg.rc</code>
</p>
</div>
<div class="paragraph">
<p>
Press <code>p</code> when composing email to see the available options.
</p>
</div>
<h3 id="read-web-pages-in-your-email" class="section-4">Read web pages in your email</h3>
<div class="paragraph">
<p>
Download link:./mailcap[this file], move the file to the <code>~/.mutt/</code> directory, add this line to your configuration file <code>set mailcap_path = ~/.mutt/mailcap</code>
</p>
</div>
<h3 id="make-it-corolful" class="section-4">Make it corolful</h3>
<div class="paragraph">
<p>
Make your NeoMutt look really good. Same drill.
</p>
</div>
<div class="paragraph">
<p>
Download link:./color.mutt[this file], move the file to the <code>~/.mutt/</code> directory, add this line to your configuration file <code>source $HOME/.mutt/color.mutt</code>
</p>
</div>
<h1 id="conclusion" class="section-2">Conclusion</h1>
<div class="paragraph">
<p>
<em>MAKE EMAIL GREAT AGAIN</em> <b style="color:#ba3925">‚óºÔ∏é</b>
</p>
</div>
</div>

<!-- Footnotes -->

<div id="footnotes">
<hr>

<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">I</a>
Taken directly from <a href="https://en.wikipedia.org/wiki/Email" title="">Wikipedia</a>
</div>

</div>

</body>
</html>
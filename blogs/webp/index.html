
<!DOCTYPE html>
<html lang="en">
<head>
<link rel="canonical" href="https://sandyuraz.com/blogs/webp" type=""/>
<link rel="shortcut icon" href="https://sandyuraz.com/assets/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="https://sandyuraz.com/assets/apple-touch-icon.png" type="image/png"/>
<link rel="image_src" href="https://sandyuraz.com/assets/android-chrome-512x512.png" type="image/png"/>
<link rel="icon" href="https://sandyuraz.com/assets/favicon.ico" type=""/>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" property="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" property="generator" content="Darkness">
<meta name="author" property="author" content="sandy">
<meta name="theme-color" property="theme-color" content="#fffff4">
<meta name="description" property="description" content="I have been toying around with &amp;lt;a href=&amp;#34;https://en.wikipedia.org/wiki/WebP&amp;#34;&amp;gt;WebP&amp;lt;/a&amp;gt; for a couple of weeks no..."><meta name="og:title" property="og:title" content="WebP is such a goated format ü´ê">
<meta name="og:site_name" property="og:site_name" content="Sandy‚Äôs Website ‚õ©">
<meta name="og:url" property="og:url" content="https://sandyuraz.com/blogs/webp">
<meta name="og:locale" property="og:locale" content="en_GB">
<meta name="og:type" property="og:type" content="website">
<meta name="og:image" property="og:image" content="https:/sandyuraz.com/blogs/webp/preview.webp">
<meta name="og:image:alt" property="og:image:alt" content="Preview">
<meta name="og:image:type" property="og:image:type" content="image/webp">
<meta name="og:image:width" property="og:image:width" content="1280">
<meta name="og:image:height" property="og:image:height" content="640">
<meta name="og:description" property="og:description" content="I have been toying around with &amp;lt;a href=&amp;#34;https://en.wikipedia.org/wiki/WebP&amp;#34;&amp;gt;WebP&amp;lt;/a&amp;gt; for a couple of weeks no..."><meta name="twitter:card" property="twitter:card" content="summary_large_image">
<meta name="twitter:site" property="twitter:site" content="Sandy‚Äôs Website ‚õ©">
<meta name="twitter:creator" property="twitter:creator" content="@sandyuraz">
<meta name="twitter:image:src" property="twitter:image:src" content="https:/sandyuraz.com/blogs/webp/preview.webp">
<meta name="twitter:url" property="twitter:url" content="https://sandyuraz.com/blogs/webp">
<meta name="twitter:title" property="twitter:title" content="WebP is such a goated format ü´ê">
<meta name="twitter:description" property="twitter:description" content="I have been toying around with &amp;lt;a href=&amp;#34;https://en.wikipedia.org/wiki/WebP&amp;#34;&amp;gt;WebP&amp;lt;/a&amp;gt; for a couple of weeks no...">
<script type="module">document.documentElement.classList.remove("no-js");document.documentElement.classList.add("js");</script>
<script async src="https://sandyuraz.com/scripts/time.js"></script>
<title>WebP is such a goated format ü´ê</title>
</head>
<link rel="stylesheet" type="text/css" href="https://sandyuraz.com/css/web.css">

<body class="article">

<div id="header">
<h1><img id="myface" src="https://sandyuraz.com/najimi.webp" width="112" height="112">WebP is such a goated format ü´ê</h1>
<div class="details">
<span id="author" class="author">sandy</span><br>
<span id="email" class="email">[at] sandyuraz [dot] com</span><br>
<span id="revdate">
<a href="https://sandyuraz.com/dossier">Dossier üñã</a> | <a href="https://sandyuraz.com/books">Bookshelf üîñ</a> | <a href="https://sandyuraz.com/fortunes">Fortunes üßß</a> | <a href="https://sandyuraz.com/">Home üè†</a></span>
</div>
<div id="hetime" class="details"></div>
</div>
<div id="content">

<div class="paragraph">
<p title="Sun, 03 Apr 2022">
93; 12022 H.E.
</p>
</div>
<div class="sect1">
<h2 id="_motivation">Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
I have been toying around with <a href="https://en.wikipedia.org/wiki/WebP">WebP</a> for a couple of weeks now. Convert this image into webp and try to use it instead of traditional png. It was pretty crazy for me to see an up to 10x image size reduction, yet very little to no visual difference with a naked human eye.
</p>
</div>
<div class="paragraph">
<p>
Some further reading led me to some pleasant discoveries, such as lossy and lossless compression, transparency with an alpha channel, metadata, animation (!) support, and a wide adoption by major browsers and graphics software over the past decade or so.
</p>
</div>
<div class="paragraph">
<p>
This is truly some state-of-the-art stuff. Even as claiming an average of 45% reduction in file size with wild PNGs found on the web and a 28% reduction compared to PNGs that are recompressed with <a href="https://en.wikipedia.org/wiki/Pngcrush">pngcrush</a> and <a href="https://en.wikipedia.org/wiki/PNGOUT">PNGOUT</a>.
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
I should try this now!
</p>
</div></div>
</div>
<div class="sect1">
<h2 id="_the_migration">The migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
The process of moving from PNG to WebP was painless. I rigged a quick <code>find</code> and <code>sed</code> script to go through all my directories and convert images with <a href="https://imagemagick.org">ImageMagick</a>. Another quick regex to find corresponding file links and references in org files, and replace them with anew webp format. It all took no more than 15 to 20 minutes. I talked to Darkness to <a href="https://github.com/thecsw/darkness/commit/85a89d871bcb272b9c2b7b36d02af67132dac834">support variable preview files</a> aaaannd <strong>push!</strong>
</p>
</div>
<div class="paragraph">
<p>
Wow, <em>it just works</em>. Even GitHub Pages deploys it in about halftime now. Let me see if we got any file size gains. I&#39;ll archive the whole website into two tar files: before and after webp changes (<code>.git</code> of course excluded).
</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sandyuraz:source* Œª ls -lh *.tar
-rw-r--r--  1 thecsw  staff   279M Apr  3 15:33 png.tar
-rw-r--r--  1 thecsw  staff   108M Apr  3 15:33 webp.tar</code></pre>
</div>
</div>

<div class="paragraph">
<p>
<strong>This is very nice</strong>. It‚Äôs less than half of what it was before! Going through some of the pages, even my eye can‚Äôt spot any differences that would be noticeable. WebP is good for all the stuff on the web. Choose your image formats based on your needs and requirements. For now, WebP looks like a great alternative. Thank you!
</p>
</div>
<div class="paragraph">
<p>
*Update*: hi, this page got a <a href="https://news.ycombinator.com/item?id=31010659">little traction</a> on HackerNews. I want to note that there are formats that are meant to supersede WebP, such as AVIF and JPEG XL, however, <a href="https://caniuse.com/avif">AVIF</a> (69.25%) and <a href="https://caniuse.com/jpegxl">JPEG XL</a> (0%) are not as nearly adopted as <a href="https://caniuse.com/webp">WebP</a> is (91.38%). Usage taken on April 13th, 2022. Also, get a browser released after 2013.
</p>
</div></div>
</div>
<div class="sect1">
<h2 id="_example_">Example?</h2>
<div class="sectionbody">
</div>
<div class="paragraph">
<p>
Let‚Äôs try to grab a picture in PNG format, convert it to WebP and see how the file size and image quality differ between those two. I&#39;ll have both examples from an amazing photographer <a href="https://mobile.twitter.com/shnimohus">@shnimohus</a>, whose shots <strong>I absolutely adore</strong>.
</p>
</div>
<div class="paragraph">
<p>
Below is the ImageMagick version I will be using when simply running <code>convert source.png target.webp</code>
</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">Version: ImageMagick 7.1.0-29 Q16-HDRI x86_64 19841 https://imagemagick.org
Copyright: (C) 1999 ImageMagick Studio LLC
License: https://imagemagick.org/script/license.php
Features: Cipher DPC HDRI Modules OpenMP(5.0)
Delegates (built-in): bzlib fontconfig freetype gslib heic jng jp2 jpeg lcms lqr ltdl lzma openexr png ps tiff webp xml zlib
Compiler: gcc (4.2)</code></pre>
</div>
</div>

<div class="paragraph">
<p>
Let‚Äôs see an example!
</p>
</div>
<div class="paragraph">
<p>
Here is a shot of a bus stop in PNG, weighing at around 2.4MB
</p>
</div>
<hr>
<div class="imageblock">
<div class="content">
<a class="image" href="booth.png"><img src="booth.png" alt="This is the PNG version"></a>
</div>
<div class="title">This is the PNG version</div>
</div>
<hr>
<div class="paragraph">
<p>
As a comparison, here is the WebP generated from it, which is only about 258KB
</p>
</div>
<hr>
<div class="imageblock">
<div class="content">
<a class="image" href="booth.webp"><img src="booth.webp" alt="This is the WebP version"></a>
</div>
<div class="title">This is the WebP version</div>
</div>
<hr>
<div class="paragraph">
<p>
For the sake of the experiment, try to dowload both files and see if you can spot any differences.
</p>
</div>
<div class="paragraph">
<p>
Here is one more example!
</p>
</div>
<hr>
<div class="imageblock">
<div class="content">
<a class="image" href="town.png"><img src="town.png" alt="This PNG is around 3.9MB"></a>
</div>
<div class="title">This PNG is around 3.9MB</div>
</div>
<hr>
<div class="paragraph">
<p>
With its counterpart generated with <code>convert town.png town.webp</code>
</p>
</div>
<hr>
<div class="imageblock">
<div class="content">
<a class="image" href="town.webp"><img src="town.webp" alt="This WebP is only around 462KB"></a>
</div>
<div class="title">This WebP is only around 462KB</div>
</div>
<hr>
<div class="paragraph">
<p>
Is this experiment biased? Definitely. I could have used some PNG compression techniques, go through ImageMagick‚Äôs documentation to fine-tune the conversion. However, the big point here is that without doing any of that, WebP seems to keep the quality I prefer while also reducing the size (doesn‚Äôt matter to me whether it‚Äôs lossy or lossless).
</p>
</div>
<div class="paragraph">
<p>
Thank you!  <b style="color:#ba3925">‚óºÔ∏é</b>
</p>
</div>
</div>
</div>

<div id="footnotes">
<hr>

<div class="footnote" id="_footnotedef_1">
<a href="#_footnotedef_1">1</a>
<a href="http://googlecode.blogspot.com/2011/11/lossless-and-transparency-encoding-in.html">Lossless and transparency encoding in WebP</a>
</div>

</div>

</body>
</html>